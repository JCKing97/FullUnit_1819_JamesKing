{% extends "base.html" %}

{% block app_content %}
    <p>{{ _('The game has concluded and the results are in!') }}</p>
    <div class="container">
        <div class="jumbotron" style="padding: 10px">
            <h2>How did the agents points stack up?</h2>
            {% for agents_name, points in agent_points.items() %}
                <label>{{ "{}: {} points".format(agents_name, points) }}</label>
                <div class="progress">
                    <div class="progress-bar {% if points==agent_points.values()|max %}progress-bar-success{% else %}progress-bar-warning{% endif %}" role="progressbar" aria-valuenow="{{ points }}" aria-valuemin="0" aria-valuemax="{{ "{}".format(5*interaction_history|length) }}" style="{{ "width: {}%".format(100 * (points / (5*(interaction_history|length)))) }}"></div>
                </div>
            {% endfor %}
        </div>
        <div class="jumbotron" style="padding: 10px">
            <h2>What interactions occurred?</h2>
            <div class="container">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Round</th>
                            {% for key in interaction_history[0].keys() %}
                                <th>{{ key }}</th>
                            {% endfor %}
                        </tr>
                    </thead>
                    <tbody>
                        {% for i in range(0,(interaction_history|length)) %}
                            <tr>
                                <th>{{ i + 1 }}</th>
                                {% for key in interaction_history[i].keys() %}
                                    <td class="{% if interaction_history[i][key] == True %}success{% else %}danger{% endif %}">{% if interaction_history[i][key] == True %}Cooperate{% else %}Defect{% endif %}</td>
                                {% endfor %}
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    {% include "_strategies_description.html" %}
{% endblock %}